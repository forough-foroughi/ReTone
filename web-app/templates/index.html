<!doctype html>
<html lang="eng" dir="ltr">
<head>
  <meta charset="utf-8">
  <title>ReTone</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  
</head>
<body>
  <div class="app-container"> 
    <header>
      <img class="logo" src="/branding/retone-logo.png" alt="ReTone" width="120" height="120">
      <p class="tagline">Say it softly. Mean it clearly.</p>
    </header>   

    <main>
      <form id="retone-form">
        <label for="text">Your sentence:</label>
        <textarea id="text" placeholder="Type your sentence..." required></textarea>

        <div class="tone-row">
            <!--<label for="tone">Select tone:</label>-->
            <select id="tone">
              <option value="serious">Serious</option>
              <option value="friendly">Friendly</option>
              <option value="humorous">Humorous</option>
              <option value="loving">Loving</option>
            </select>
        </div>

        <button type="submit" id="submitBtn">ReTone</button>
        <span class="muted" id="status"></span>
      </form>

      <div id="result" class="result"></div>
      <button id="copyBtn">Copy</button>
      <div id="error" class="error"></div>
    </main>
  </div>

  <script>
    const form = document.getElementById('retone-form');
    const textEl = document.getElementById('text');
    const toneEl = document.getElementById('tone');
    const resultEl = document.getElementById('result');
    const statusEl = document.getElementById('status');
    const errorEl = document.getElementById('error');
    const submitBtn = document.getElementById('submitBtn');

    form.addEventListener('submit', async (e) => {
        e.preventDefault(); 
        errorEl.textContent = '';
        statusEl.textContent = 'Workingâ€¦';
        submitBtn.disabled = true;

        try {
            const res = await fetch('/api/retone', {
                method: 'POST',
                headers: { 'Content-Type':'application/json' },
                body: JSON.stringify({
                    text: textEl.value,
                    tone: toneEl.value
                })
            });

            const data = await res.json();
            if (!res.ok) throw new Error(data?.error || 'Request failed');

            resultEl.style.display = 'block';
            resultEl.textContent = data.result;
            statusEl.textContent = 'Done';
        } catch (err) {
          errorEl.textContent = err.message || 'Something went wrong';
          statusEl.textContent = '';
        } finally {
          submitBtn.disabled = false;
        }
    });
  </script>
</body>
</html>